(this.webpackJsonpcmswithreact=this.webpackJsonpcmswithreact||[]).push([[0],{15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),c=a.n(r),s=a(9),i=a.n(s),o=(a(15),a(5)),d=a(2),l=a(3),u=a.n(l),b=a(4),j=a(6),f=a(7),h=function(){function e(){Object(j.a)(this,e),this.baseUrl="http://localhost:5000/cards"}return Object(f.a)(e,[{key:"getAllCards",value:function(){var e=Object(b.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl);case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteCard",value:function(){var e=Object(b.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseUrl,"/").concat(t),{method:"DELETE"});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addCardToCategory",value:function(){var e=Object(b.a)(u.a.mark((function e(t,a,n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({belongingCategoryId:n,cardTitle:t,cardBody:a})});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"updateCard",value:function(){var e=Object(b.a)(u.a.mark((function e(t,a,n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseUrl,"/").concat(n),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({cardBody:t,cardTitle:a})});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}(),p=function(e){var t=e.addCat,a=Object(r.useState)("buttonMode"),c=Object(d.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(""),l=Object(d.a)(o,2),u=l[0],b=l[1],j=function(e){e.preventDefault(),i("buttonMode"===s?"formMode":"buttonMode")};return"buttonMode"===s?Object(n.jsx)("div",{className:"createNewCategoryContainer mt-5 mb-5",children:Object(n.jsx)("i",{className:"fas fa-plus-circle addBtnCategory",title:"create new category",onClick:j})}):"formMode"===s?Object(n.jsx)("div",{className:"categoryAddBtnContainer mb-5",children:Object(n.jsx)("div",{className:"formWrapper mt-5",children:Object(n.jsxs)("form",{children:[Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{className:"form-label",children:"Category Title"}),Object(n.jsx)("input",{type:"text",className:"form-control input-sm",placeholder:"Insert the title of the Category",value:u,onChange:function(e){b(e.target.value)}})]}),Object(n.jsxs)("div",{className:"buttonsContainerForm",children:[Object(n.jsx)("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),console.log(u.match(/\S/g)),u.match(/\S/g)?t(u):alert("Insert a valid title!"),b("")},children:"Add"}),Object(n.jsx)("button",{className:"btn btn-primary",onClick:j,children:"Back"})]})]})})}):void 0},m=function(e){var t=e.id,a=e.title,c=e.body,s=e.categoryId,i=e.deleteCard,o=e.updateCard,l=Object(r.useState)(!1),u=Object(d.a)(l,2),b=u[0],j=u[1],f=Object(r.useState)("card"),h=Object(d.a)(f,2),p=h[0],m=h[1],O=Object(r.useState)(a),C=Object(d.a)(O,2),g=C[0],y=C[1],x=Object(r.useState)(c),v=Object(d.a)(x,2),N=v[0],w=v[1];return"card"===p?Object(n.jsxs)("div",{className:"card text-white bg-primary mb-3 singleCardForArr","data-id":t,"data-belongingcategoryid":s,onClick:function(e){e.target.classList.contains("trashingTheCard")?window.confirm("Are you sure you want to delete this card?")&&i(t,s):e.target.classList.contains("editCard")?(console.log("edit Card btn pressed"),m("formUpdate")):j(!0!==b)},children:[Object(n.jsx)("i",{className:"fas fa-trash-alt trashingTheCard ".concat(!0===b?"trashingCardVisible":"trashingCardInvisible")}),Object(n.jsx)("i",{className:"fas fa-edit editCard ".concat(!0===b?"editCardVisible":"editCardInvisible")}),Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h5",{className:"card-title",children:a}),Object(n.jsx)("p",{className:"card-text",children:c})]})]}):"formUpdate"===p?Object(n.jsx)("div",{className:"containerOfUpdateCard mb-3",children:Object(n.jsx)("div",{className:"formWrapper",children:Object(n.jsxs)("form",{children:[Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{className:"form-label",children:"Title"}),Object(n.jsx)("input",{type:"text",className:"form-control input-sm",placeholder:"Insert the title of the card",value:g,onChange:function(e){y(e.target.value)}})]}),Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{className:"form-label",children:"Content"}),Object(n.jsx)("textarea",{rows:"4",type:"text",className:"form-control input-group-sm",placeholder:"Insert the content of the card",value:N,onChange:function(e){w(e.target.value)}})]}),Object(n.jsxs)("div",{className:"buttonsContainerForm",children:[Object(n.jsx)("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),o(N,g,t,s),m("card"),j(!1)},children:"Update"}),Object(n.jsx)("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),m("card")},children:"Back"})]})]})})}):void 0},O=function(e){var t=e.addCard,a=e.categoryId,c=Object(r.useState)("button"),s=Object(d.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)(""),u=Object(d.a)(l,2),b=u[0],j=u[1],f=Object(r.useState)(""),h=Object(d.a)(f,2),p=h[0],m=h[1],O=function(e){e.preventDefault(),o("button"===i?"form":"button")};return"button"===i?Object(n.jsx)("div",{className:"containerOfNewCardBtn",children:Object(n.jsx)("span",{className:"createNewCardContainer mb-4",children:Object(n.jsx)("i",{className:"fas fa-plus-circle addBtnCard",title:"create new card",onClick:O})})}):"form"===i?Object(n.jsx)("div",{className:"containerOfNewCardBtn",children:Object(n.jsx)("div",{className:"formWrapper",children:Object(n.jsxs)("form",{children:[Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{className:"form-label",children:"Title"}),Object(n.jsx)("input",{type:"text",className:"form-control input-sm",placeholder:"Insert the title of the card",value:b,onChange:function(e){j(e.target.value)}})]}),Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{className:"form-label",children:"Content"}),Object(n.jsx)("textarea",{rows:"4",type:"text",className:"form-control input-group-sm",placeholder:"Insert the content of the card",value:p,onChange:function(e){m(e.target.value)}})]}),Object(n.jsxs)("div",{className:"buttonsContainerForm",children:[Object(n.jsx)("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),t(b,p,a),O(e),j(""),m("")},children:"Add"}),Object(n.jsx)("button",{className:"btn btn-primary",onClick:O,children:"Back"})]})]})})}):void 0},C=function(e){var t=e.categoryCards,a=e.categoryId,r=e.deleteCard,c=e.addCard,s=e.updateCard;return Object(n.jsxs)("div",{className:"cardsContainerWhole",children:[Object(n.jsx)("div",{className:"cardsContainer",children:t.map((function(e){return Object(n.jsx)(m,{id:e._id,title:e.title,body:e.body,categoryId:a,deleteCard:r,updateCard:s},e._id)}))}),Object(n.jsx)(O,{addCard:c,categoryId:a})]})},g=function(e){var t=e.categoryTitle,a=e.categoryId,c=e.categoryCards,s=e.addCard,i=e.deleteCard,o=e.deleteCategory,l=e.updateCard,u=e.updateCategory,b=Object(r.useState)(!1),j=Object(d.a)(b,2),f=j[0],h=j[1],p=Object(r.useState)("title"),m=Object(d.a)(p,2),O=m[0],g=m[1],y=Object(r.useState)(t),x=Object(d.a)(y,2),v=x[0],N=x[1];return"formToUpdate"===O?Object(n.jsx)("div",{className:"categoryAddBtnContainer mb-5",children:Object(n.jsx)("div",{className:"formWrapper mt-5",children:Object(n.jsxs)("form",{children:[Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{className:"form-label",children:"Category Title"}),Object(n.jsx)("input",{type:"text",className:"form-control input-sm",placeholder:"Insert the title of the Category",value:v,onChange:function(e){N(e.target.value)}})]}),Object(n.jsxs)("div",{className:"buttonsContainerForm",children:[Object(n.jsx)("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),u(v,a).then((function(){return g("title")}))},children:"Update"}),Object(n.jsx)("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),g("title")},children:"Back"})]})]})})}):"title"===O?Object(n.jsxs)("div",{className:"category","data-id":a,children:[Object(n.jsx)("div",{className:"mt-5 mb-2 categoryTitleFont",onClick:function(e){e.target.classList.contains("enableEditMode")?h(!0!==f):e.target.classList.contains("trashingTheCategory")?window.confirm("Are you sure you want to delete this category?")?o(a):h(!1):e.target.classList.contains("editCategoryBtn")&&g("formToUpdate")},children:Object(n.jsxs)("b",{className:"categoryTitleFont enableEditMode",children:[Object(n.jsx)("i",{className:"fas fa-edit editCategoryBtn ".concat(!0===f?"editCatVisible":"editCatInvisible")}),Object(n.jsx)("i",{className:"fas fa-trash-alt trashingTheCategory ".concat(!0===f?"trashingCatVisible":"trashingCatInvisible")}),t]})}),Object(n.jsx)(C,{categoryCards:c,addCard:s,deleteCard:i,categoryId:a,updateCard:l})]}):void 0},y=function(e){var t=e.categories,a=e.addCard,r=e.deleteCard,c=e.deleteCategory,s=e.updateCard,i=e.updateCategory;return Object(n.jsx)("div",{children:t.map((function(e){return Object(n.jsx)(g,{categoryTitle:e.title,categoryId:e._id,categoryCards:e.cards,addCard:a,deleteCard:r,deleteCategory:c,updateCard:s,updateCategory:i},e._id)}))})},x=new(function(){function e(){Object(j.a)(this,e),this.baseUrl="http://localhost:5000/categories"}return Object(f.a)(e,[{key:"getAllCategories",value:function(){var e=Object(b.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl);case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createCategory",value:function(){var e=Object(b.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({categoryTitle:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCategory",value:function(){var e=Object(b.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseUrl,"/").concat(t),{method:"DELETE"});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCategory",value:function(){var e=Object(b.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseUrl,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({categoryTitle:a})});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),v=new h,N=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],c=t[1];Object(r.useEffect)((function(){x.getAllCategories().then((function(e){console.log("all the data is",e),c(e)}))}),[]);return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(y,{categories:a,addCard:function(e,t,n){v.addCardToCategory(e,t,n).then((function(e){c(a.map((function(t){return t._id===n?e:t})))}))},deleteCard:function(e,t){v.deleteCard(e).then((function(e){console.log("deletedCard is",e);var n=a.find((function(e){return e._id===t})),r=Object(o.a)(Object(o.a)({},n),{},{cards:n.cards.filter((function(t){return t._id!==e._id}))});c(a.map((function(e){return e._id===t?r:e})))}))},deleteCategory:function(e){x.deleteCategory(e).then((function(t){console.log("deleted category is",t),c(a.filter((function(t){return t._id!==e})))}))},updateCard:function(e,t,n,r){v.updateCard(e,t,n).then((function(e){var t=a.find((function(e){return e._id===r})),s=Object(o.a)(Object(o.a)({},t),{},{cards:t.cards.map((function(t){return t._id===n?e:t}))});c(a.map((function(e){return e._id===r?s:e})))}))},updateCategory:function(e,t){return x.updateCategory(t,e).then((function(e){c(a.map((function(a){return a._id===t?e:a})))}))}}),Object(n.jsx)(p,{addCat:function(e){x.createCategory(e).then((function(t){console.log("new category! with id ".concat(t)),c(a.concat({_id:t,title:e,cards:[]}))}))}})]})};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(N,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.cefdcaf3.chunk.js.map